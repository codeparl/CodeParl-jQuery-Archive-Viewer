'use strict';(function(b,g){function p(a){a.fetchOnload&&b.ajax({type:"GET",url:a.serverPath,data:a.params.load,dataType:"json",success:function(c){f.html(c.archiveContent.content)}})}function q(a){f.on("click.jquery-codeparl-archive-viewer",".list-group-item a",function(){var c=b(this),d=c.closest("li.list-group-item"),e=e=d.data("index"),h=d.data("type"),m=f.find("ul[data-entry]").first().data("entry");if(shouldContinue=r(d,c,h))c.addClass("disabled"),d.append(b('<div class="linePreloader"></div>')),
b.ajax({url:a.serverPath,method:"GET",dataType:"json",data:{"zip-name":m+".zip","file-index":e,"file-type":h,"file-name":c.text(),"file-path":d.data("path"),"sub-list":1}}).then(function(k){f.trigger("sub-content-loaded");c.removeClass("disabled");b(".linePreloader").remove();if("folder"===h)d.data("open",!0),d.find("i").eq(0).toggleClass("fa-minus fa-plus"),d.find("i").eq(1).toggleClass("fa-folder-open fa-folder"),b(k.content).slideDown(100).insertAfter(c),d.data("open",!0);else{if(null===k.content){var n=
g.location.protocol+"//"+g.location.host;n+="/"+a.downloadPath+"?name="+(m+".zip&index="+e);g.open(n,"_top")}t(k,a)}})})}function r(a,c,d){var e=!0;"folder"===d&&a.data("open")&&(c.next("ul").slideUp("fast",function(){a.data("open",!1);a.find("i").eq(0).toggleClass("fa-minus fa-plus ");a.find("i").eq(1).toggleClass("fa-folder-open fa-folder");b(this).remove()}),e=!1);return e}function t(a,c){if(null!==a.content&&(c.onPreview(a),null!==a.content&&g.ace)){b("body").prepend('<div class="modal fade" data-backdrop="static" id="cav-modal" data-show="false" role="dialog"  aria-hidden="true"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"></h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><div id="cav-editor"></div></div></div></div></div> ');
var d=b("#cav-modal");b("#cav-editor").css("height",c.editor.editorHeight);if(a.info.isImage)d.find(".modal-body").html(b("<img>").attr({alt:a.info.path,src:a.content}).addClass("img-fluid"));else{var e=ace.edit("cav-editor");e.setTheme("ace/theme/"+c.editor.theme);e.session.setMode("ace/mode/"+a.info.fileType.toLowerCase());e.session.setValue(a.content);e.setOptions({fontSize:16,readOnly:!0})}d.modal("show").on("bs-hidden-modal",function(){b(this).remove()}).find(".modal-title").text(a.info.path)}}
var f,l={init:function(a){f=this;a=b.extend({},b.fn.codeparlArchiveViewer.options,a);this.addClass("cav-archive-viewer");this.css(a.css);f.html('<div class="cav-preloader" ><div class="lds-dual-ring"></div></div>');null===a.archiveContent||a.fetchOnload||f.html(a.archiveContent.content);p(a);q(a)}};b.fn.codeparlArchiveViewer=function(a){if(l[a]){var c=Array.prototype.slice.call(arguments,1);l[a].apply(this,c)}else"object"!==b.type(a)&&a?b.error("The method "+a+" does not exist on jquery-codeparl-archive-viewer"):
l.init.apply(this,arguments)};b.fn.codeparlArchiveViewer.options={serverPath:"server/content-server.php",downloadPath:"projects/jquery-archive-viewer/server/content-server.php",fetchOnload:!0,archiveContent:null,params:{load:"archive=jquery-archive-viewer.zip",list:"zip-list"},css:{maxHeight:"550px",minHeight:"550px"},editor:{editorHeight:"550px",theme:"tomorrow"},onPreview:function(a){}}})(jQuery,window);